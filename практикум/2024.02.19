class TrapezoidalRule{
    public static double Solve(Func<Double, Double> f, double a, double b, double dx){
        double summ = 0;
        double current_posx = a;
        while (current_posx < b){
            if (current_posx > b){
                current_posx = b;
            }
            current_posx += dx;
            double p = ((f(current_posx-dx)+f(current_posx))*dx)/2;
            summ += p;

        }
        return summ;
    }
}

Func<double, double> f = (double x) => -x*x + 9;
double a = -3;
double b = 3;
double dx = 0.1;
Console.WriteLine(TrapezoidalRule.Solve(f,a,b,dx));
